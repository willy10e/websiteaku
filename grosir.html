<<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Grosir Bang Iky</title>
<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    background: #f4f4f4;
}
header {
    background: #2c3e50;
    color: white;
    padding: 15px;
    text-align: center;
}
.container {
    padding: 20px;
}
.card {
    background: white;
    padding: 15px;
    margin-bottom: 15px;
    border-radius: 5px;
}
button {
    padding: 8px 12px;
    background: #27ae60;
    color: white;
    border: none;
    cursor: pointer;
    border-radius: 4px;
}
button:hover {
    background: #219150;
}
input {
    width: 100%;
    padding: 8px;
    margin: 5px 0;
}
#cart {
    position: fixed;
    right: 20px;
    top: 80px;
    width: 250px;
    background: white;
    border-radius: 5px;
    padding: 10px;
}
#chatbot {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 300px;
    background: white;
    border-radius: 5px;
}
#chatBody {
    height: 200px;
    overflow-y: auto;
    padding: 10px;
    font-size: 14px;
}
.chat-input {
    display: flex;
}
.chat-input input {
    flex: 1;
}
.chat-input button {
    background: #2980b9;
}
.hidden {
    display: none;
}
</style>
</head>
<body>

<header>
    <h1>Grosir Bang Iky</h1>
</header>

<div class="container">

<!-- LOGIN & REGISTER -->
<div id="auth" class="card">
    <h3>Login / Daftar</h3>
    <input type="text" id="username" placeholder="Username">
    <input type="password" id="password" placeholder="Password">
    <button onclick="register()">Daftar</button>
    <button onclick="login()">Login</button>
    <p id="authMsg"></p>
</div>

<!-- PRODUK -->
<div id="produk" class="hidden">
    <div class="card">
        <h3>Gula 1 Kg</h3>
        <p>Rp 15.000</p>
        <button onclick="addCart('Gula 1 Kg',15000)">Tambah ke Keranjang</button>
    </div>

    <div class="card">
        <h3>Beras 5 Kg</h3>
        <p>Rp 65.000</p>
        <button onclick="addCart('Beras 5 Kg',65000)">Tambah ke Keranjang</button>
    </div>

    <div class="card">
        <h3>Minyak Goreng 2L</h3>
        <p>Rp 32.000</p>
        <button onclick="addCart('Minyak Goreng 2L',32000)">Tambah ke Keranjang</button>
    </div>
</div>

</div>

<!-- KERANJANG -->
<div id="cart" class="hidden">
    <h4>Keranjang</h4>
    <ul id="cartItems"></ul>
    <b>Total: Rp <span id="total">0</span></b>
</div>

<!-- CHATBOT -->
<div id="chatbot" class="hidden">
    <div id="chatBody">
        <p><b>Bot:</b> Halo! Ketik <b>checkout</b> untuk pesan via WhatsApp</p>
    </div>
    <div class="chat-input">
        <input type="text" id="userInput" placeholder="Ketik pesan...">
        <button onclick="sendChat()">Kirim</button>
    </div>
</div>

<script>
let cart = [];
let total = 0;

/* REGISTER */
function register() {
    let u = username.value;
    let p = password.value;
    if (!u || !p) return alert("Lengkapi data!");
    localStorage.setItem(u, p);
    authMsg.innerText = "Daftar berhasil, silakan login";
}

/* LOGIN */
function login() {
    let u = username.value;
    let p = password.value;
    if (localStorage.getItem(u) === p) {
        auth.classList.add("hidden");
        produk.classList.remove("hidden");
        cartDiv = document.getElementById("cart");
        cartDiv.classList.remove("hidden");
        chatbot.classList.remove("hidden");
    } else {
        authMsg.innerText = "Login gagal!";
    }
}

/* CART */
function addCart(nama, harga) {
    cart.push({nama, harga});
    total += harga;
    renderCart();
}

function renderCart() {
    cartItems.innerHTML = "";
    cart.forEach(item => {
        cartItems.innerHTML += `<li>${item.nama} - Rp ${item.harga}</li>`;
    });
    totalSpan = document.getElementById("total");
    totalSpan.innerText = total;
}

/* CHATBOT */
function sendChat() {
    let input = userInput.value;
    if (!input) return;

    chatBody.innerHTML += `<p><b>Anda:</b> ${input}</p>`;

    if (input.toLowerCase().includes("checkout")) {
        checkoutWA();
    } else {
        chatBody.innerHTML += `<p><b>Bot:</b> Saya bisa bantu checkout, ketik <b>checkout</b></p>`;
    }

    userInput.value = "";
    chatBody.scrollTop = chatBody.scrollHeight;
}

/* CHECKOUT WHATSAPP */
function checkoutWA() {
    if (cart.length === 0) {
        chatBody.innerHTML += `<p><b>Bot:</b> Keranjang kosong</p>`;
        return;
    }

    let pesan = "Halo Bang Iky, saya mau pesan:%0A";
    cart.forEach(item => {
        pesan += `- ${item.nama} Rp ${item.harga}%0A`;
    });
    pesan += `%0ATotal: Rp ${total}`;

    let wa = "https://wa.me/6283134749029?text=" + pesan;
    window.open(wa, "_blank");
}
</script>

</body>
</html>
